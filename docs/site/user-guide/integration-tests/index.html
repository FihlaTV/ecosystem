<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Integration-Tests - Ecosystem Documentation</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">Ecosystem Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li class="active">
    <a href="./">Integration-Tests</a>
</li>
                            
<li >
    <a href="../dogu-creation/">Dogu creation</a>
</li>
                            
<li >
    <a href="../migration/">Migration</a>
</li>
                            
<li >
    <a href="../bash-guideline/">Bash Scripting Guideline</a>
</li>
                        </ul>
                    </li>
                    <li >
                        <a href="../../about/">About</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../dogu-creation/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#integration-tests">Integration-Tests</a></li>
            <li><a href="#installation">Installation</a></li>
            <li><a href="#executing-integration-tests">Executing integration-tests</a></li>
            <li><a href="#specifications">Specifications</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="integration-tests">Integration-Tests</h1>
<p>This repository consists of integration-tests for the cloudogu ecosystem setup via setup.json. The tests are written in Java inside a Maven Project which uses Selenium and Gauge as plugins for testing using automated browser input.</p>
<h2 id="installation">Installation</h2>
<p>Before you can use integration-tests you have to make some presets to your system. These presets consist of maven and gauge as plugins and chromedriver an driver to use selenium with Google Chrome which is the preferred web browser for the integration-tests.   </p>
<h3 id="install-apache-maven">Install Apache Maven</h3>
<p>Maven is mandatory because the integration test project is written as an maven project. To install maven on your linux system perform the following steps.</p>
<ul>
<li>First you have to download maven from https://maven.apache.org/download.cgi.</li>
<li>Ensure you have java installed and its location set as environment variable.</li>
<li>You either got an <code>.zip</code> or an <code>.gz</code> file. The choice is yours. Now extract maven like presented.</li>
</ul>
<pre><code>unzip apache-maven-3.3.9-bin.zip
</code></pre>

<p>or</p>
<pre><code>tar xzvf apache-maven-3.3.9-bin.tar.gz
</code></pre>

<ul>
<li>Now add the <code>bin</code> directory of the created directory <code>apache-maven-3.3.9</code> to the <code>PATH</code> environment variable.</li>
<li>Verify your version with <code>mvn -v</code>.</li>
</ul>
<h3 id="installing-gauge">Installing Gauge</h3>
<p>The integration tests are executed via gauge an light-weight cross-platform test automation tool. To run the tests you have to download gauge as described.</p>
<ul>
<li>Download Gauge from http://getgauge.io/get-started/.</li>
<li>Then execute the following commands:</li>
</ul>
<pre><code>unzip gauge-$VERSION-$OS.$ARCH.zip
./install.sh
</code></pre>

<h3 id="installing-chromedriver">Installing chromedriver</h3>
<p>It is necessary to have chromedriver installed on your system to run integration tests via Google Chrome. Google Chrome is preferable to Firefox due to connection issues.</p>
<ul>
<li>Assuming you are running a 64-bit OS, download the latest version of chromedriver and unzip it.</li>
</ul>
<pre><code>wget -N http://chromedriver.storage.googleapis.com/2.10/chromedriver_linux64.zip -P ~/Downloads
</code></pre>

<pre><code>unzip ~/Downloads/chromedriver_linux64.zip -d ~/Downloads
</code></pre>

<ul>
<li>Make the file you just extracted executable and move it to <code>/usr/local/share</code>.</li>
</ul>
<pre><code>chmod +x ~/Download/chromedriver
</code></pre>

<pre><code>sudo mv -f ~/Downloads/chromedriver /usr/local/share/chromedriver
</code></pre>

<ul>
<li>Now create symlinks to chromedriver.</li>
</ul>
<pre><code>sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver
</code></pre>

<pre><code>sudo ln -s /usr/local/share/chromedriver /usr/bin/chromedriver
</code></pre>

<ul>
<li>Now chromedriver will be found on your system.    </li>
</ul>
<h2 id="executing-integration-tests">Executing integration-tests</h2>
<p>In the following section setting up variables to start integration-tests will be described. Short examples show how to start Gauge tests using Maven via command line.</p>
<h3 id="configurate-url">Configurate Url</h3>
<p>If you are in the <code>integration-tests</code> folder, you might configurate the test environment variables using the command line as follows without changing <code>gauge_jvm_args</code> manually in the file <code>./env/default/java.properties</code>:</p>
<pre><code>gauge_jvm_args= -Deco.system=${url} mvn test
</code></pre>

<p>e.g. if the url is <code>https://192.168.115.136</code></p>
<pre><code>gauge_jvm_args= -Deco.system=https://192.168.115.136 mvn test
</code></pre>

<p>This command will define <code>-D</code> the system property <code>eco.system</code> which is needed for the test environment and execute <code>mvn test</code> to start the integration-tests with that property. The specified url should be the same url to open cloudogu in the browser. Once configurated integration tests can be started with <code>mvn test</code>.</p>
<h3 id="start-certain-tests-using-tags">Start certain tests using tags</h3>
<p>While <code>mvn test</code> will start all Gauge specifications defined in the integration-tests, it might be useful only to start certain tests. The scenarios inside the specification files are marked with tags. So if only that scenario should be started you have to enter <code>mvn test -Dtags=${tag}</code> where <code>${tag}</code> is predefined in the spec files in the <code>specs</code> directory. An command could be <code>mvn test -Dtags=jenkins</code> to start all Jenkins scenarios. The following values for <code>${tag}</code> are allowed:</p>
<table>
<thead>
<tr>
<th>Tag</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td>jenkins</td>
<td>Starts all tests associated with Jenkins</td>
</tr>
<tr>
<td>redmine</td>
<td>... with Redmine</td>
</tr>
<tr>
<td>usermgt</td>
<td>... with Usermgt</td>
</tr>
<tr>
<td>sonar</td>
<td>... Sonar</td>
</tr>
<tr>
<td>nexus</td>
<td>... with Nexus</td>
</tr>
<tr>
<td>scm</td>
<td>... with SCM</td>
</tr>
<tr>
<td>workflow</td>
<td>Starts all Workflow tests</td>
</tr>
<tr>
<td>rest_api</td>
<td>Starts all REST Api tests</td>
</tr>
<tr>
<td>rest_api_token</td>
<td>Starts REST Api tests using tokens/keys</td>
</tr>
<tr>
<td>single_sign_out</td>
<td>Starts all Single Sign Out tests</td>
</tr>
<tr>
<td>groups</td>
<td>Starts tests involving groups</td>
</tr>
<tr>
<td>attributes</td>
<td>Starts tests to check user attributes</td>
</tr>
</tbody>
</table>
<p>Besides using only one tag it is possible to use a set of tags, assumed the certain set is defined. To use multiple tags use <code>mvn test -Dtags="${tag0},${tag1}"</code>. For example: The command <code>mvn test -Dtags="jenkins, workflow"</code> will test the workflow of Jenkins. Allowed tag combinations are presented in the table:</p>
<table>
<thead>
<tr>
<th>Tags</th>
<th>jenkins</th>
<th>redmine</th>
<th>usermgt</th>
<th>sonar</th>
<th>nexus</th>
<th>scm</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>workflow</strong></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
</tr>
<tr>
<td><strong>rest_api</strong></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
</tr>
<tr>
<td><strong>rest_api_token</strong></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>no</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>no</em></td>
</tr>
<tr>
<td><strong>single_sign_out</strong></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
</tr>
<tr>
<td><strong>groups</strong></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>no</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
</tr>
<tr>
<td><strong>attributes</strong></td>
<td><em>yes</em></td>
<td><em>yes</em></td>
<td><em>no</em></td>
<td><em>yes</em></td>
<td><em>no</em></td>
<td><em>yes</em></td>
</tr>
</tbody>
</table>
<h2 id="specifications">Specifications</h2>
<p>Maven uses Gauge as an plugin which is executed in the test scope. Gauge consists of files with spec extension so called Specifications. If you run <code>mvn test</code> in integration-tests all files inside the <code>specs/</code> directory with spec extension will be executed. Specifications consist of scenarios, which again consist of a set of procedural Steps. E.g. all combined tests for Jenkins are combined in one spec file which are all tagged with <code>jenkins</code>, single tests inside the file are scenarios. Go on <a href="http://getgauge.io/documentation/user/current/">Gauge web site</a> for more informations about the gauge syntax.</p>
<p>In some tests we have the following step syntax:</p>
<pre><code>* Jenkins-Login &quot;admin&quot; with password &quot;adminpw&quot; with admin rights
</code></pre>

<p>Such a step has to be implemented by a method using the <code>@Step</code> annotation. E.g. in Java is would look like this:</p>
<pre><code class="java">@Step(&quot;Jenkins-Login &lt;user&gt; with password &lt;password&gt; with admin rights&quot;)
public void loginWithAdminRights(String user, String password){
  // some code using &quot;user&quot; and &quot;password&quot; to log in
}
</code></pre>

<p>The two arguments "admin" and "adminpw" defined inside a step in the spec-file are injected to the method <code>public void loginWithAdminRights(String user, String password)</code> as user and password. Changing the arguments of the step inside the quotation marks will also change the two Strings <code>user</code> and <code>password</code> inside the implementing method.  </p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
